<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI Business Recommendation</title>

<style>
  body{
    background:#0b0b0b;
    color:#fff;
    font-family:Arial, sans-serif;
    padding:40px;
  }
  h1{margin-bottom:20px}
  input,select,button{
    width:320px;
    padding:10px;
    margin:8px 0;
    border-radius:6px;
    border:none;
    font-size:14px;
  }
  button{
    background:#00ffd5;
    color:#000;
    font-weight:bold;
    cursor:pointer;
  }
  table{
    width:100%;
    margin-top:30px;
    border-collapse:collapse;
    display:none;
  }
  th,td{
    border:1px solid #333;
    padding:12px;
    text-align:center;
  }
  th{background:#111}
</style>
</head>

<body>

<h1>AI Business Recommendation</h1>

<input id="budget" placeholder="Budget (eg: 3 Lakhs)">
<br>

<select id="category">
  <option>Digital</option>
  <option>Food</option>
  <option>Service</option>
  <option>Manufacturing</option>
  <option>Education</option>
</select>
<br>

<input id="experience" placeholder="Experience (years)">
<br>

<button onclick="generateIdeas()">Generate</button>

<table id="resultTable">
<thead>
<tr>
  <th>S.No</th>
  <th>Business Title</th>
  <th>Investment</th>
  <th>Detail</th>
</tr>
</thead>
<tbody></tbody>
</table>

<script>
const API_KEY = "AIzaSyDXcWGI6n1U9xN2O8taioFKJTbIHmKEIHM"; // TRIAL ONLY

async function generateIdeas(){

  const budget = document.getElementById("budget").value;
  const category = document.getElementById("category").value;
  const experience = document.getElementById("experience").value;

  const prompt = `
You are a business idea recommendation AI.

Inputs:
Budget: â‚¹${budget}
Category: ${category}
Experience: ${experience} years

Rules:
1. Give exactly 6 business ideas
2. Practical for India
3. Return ONLY JSON
4. No markdown, no explanation

Format:
[
  {
    "s_no": 1,
    "business_title": "",
    "estimated_investment": "",
    "detail": "Short 1-line description"
  }
]
`;

  try{
    const response = await fetch(
      "https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-pro:generateContent?key=" + API_KEY,
      {
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body:JSON.stringify({
          contents:[
            { parts:[{ text: prompt }] }
          ]
        })
      }
    );

    const data = await response.json();
    console.log("RAW RESPONSE:", data);

    if(!data.candidates){
      alert("Gemini API Error. Check console.");
      return;
    }

    let text = data.candidates[0].content.parts[0].text;

    // clean markdown if Gemini adds it
    text = text.replace(/```json|```/g,"").trim();

    const ideas = JSON.parse(text);

    const tbody = document.querySelector("#resultTable tbody");
    tbody.innerHTML = "";

    ideas.forEach(item=>{
      tbody.innerHTML += `
        <tr>
          <td>${item.s_no}</td>
          <td>${item.business_title}</td>
          <td>${item.estimated_investment}</td>
          <td>
            <button onclick="alert('${item.detail.replace(/'/g,"")}')">
              View
            </button>
          </td>
        </tr>
      `;
    });

    document.getElementById("resultTable").style.display="table";

  }catch(err){
    console.error(err);
    alert("Error occurred. Open console (F12).");
  }
}
</script>

</body>
</html>
